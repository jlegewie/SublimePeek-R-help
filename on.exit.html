<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
 <html><head><title>R: Function Exit Code</title>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
 <link rel="stylesheet" type="text/css" href="R.css">
 </head><body>
 
 <table width="100%" summary="page for on.exit"><tr><td>on.exit</td><td align="right">R Documentation</td></tr></table>
 
 <h2>Function Exit Code</h2>
 
 <h3>Description</h3>
 
 
 <p><code>on.exit</code> records the expression given as its argument as needing
 to be executed when the current function exits (either naturally or as
 the result of an error).  This is useful for resetting graphical
 parameters or performing other cleanup actions.
 </p>
 <p>If no expression is provided, i.e., the call is <code>on.exit()</code>, then
 the current <code>on.exit</code> code is removed.
 </p>
 
 
 <h3>Usage</h3>
 
 <pre>
 on.exit(expr = NULL, add = FALSE)
 </pre>
 
 
 <h3>Arguments</h3>
 
 
 <table summary="R argblock">
 <tr valign="top"><td><code>expr</code></td>
 <td>
 <p>an expression to be executed.</p>
 </td></tr>
 <tr valign="top"><td><code>add</code></td>
 <td>
 <p>if TRUE, add <code>expr</code> to be executed after any previously
 set expressions; otherwise (the default) <code>expr</code> will overwrite
 any previously set expressions.</p>
 </td></tr>
 </table>
 
 
 <h3>Details</h3>
 
 
 <p>Where <code>expr</code> was evaluated changed in <font face="Courier New,Courier" color="#666666"><b>R</b></font> 2.8.0, and the following
 applies only to that and later versions.
 </p>
 <p>The <code>expr</code> argument passed to <code>on.exit</code> is recorded without
 evaluation.  If it is not subsequently removed/replaced by another
 <code>on.exit</code> call in the same function, it is evaluated in the
 evaluation frame of the function when it exits (including during
 standard error handling).  Thus any functions or variables in the
 expression will be looked for in the function and its environment at
 the time of exit: to capture the current value in <code>expr</code> use
 <code>substitute</code> or similar.
 </p>
 <p>This is a &lsquo;special&rsquo; primitive function: it only
 evaluates the argument <code>add</code>.
 </p>
 
 
 <h3>Value</h3>
 
 
 <p>Invisible <code>NULL</code>.
 </p>
 
 
 <h3>References</h3>
 
 
 <p>Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
 <EM>The New S Language</EM>.
 Wadsworth &amp; Brooks/Cole.
 </p>
 
 
 <h3>See Also</h3>
 
 
 <p><code>sys.on.exit</code> which returns the expression stored for use
 by <code>on.exit()</code> in the function in which <code>sys.on.exit()</code> is
 evaluated.  
 </p>
 
 
 <h3>Examples</h3>
 
 <pre>
 require(graphics)
 
 opar &lt;- par(mai = c(1,1,1,1))
 on.exit(par(opar))
 
 </pre>
 
 
 </body></html>
